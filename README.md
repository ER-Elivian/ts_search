# TS_find.py

содержит класс optTS, импортируемый

```
optTS(rpath, xyz_name,optimized_cap=0, ratio=0, maxstep=7000, print_output=True, mode="strict"):
```
- `rpath` - абсолютный путь к файлу, 
- `xyz_name` - имя файла входной структуры,
- `optimized_cap`=0 - максимальная сила, действующая вдоль связи в соптимизированном ПС (если 0, то не используется), 
- `ratio=0` - максимальное относительное превышение сил, действующих вдоль связей, над "фоном" - силами, действующими на атомы, не связанные констрейнами (если 0, то не используется), 
- `maxstep=7000` - максимальное число шагов оптимизации
- `print_output` - вывод информации о каждом шаге
- `mode` - "strict" - использовать только "правильный" алгоритм на этапе выравнивания сил, "autostrict" - то же, но только для структур с <3 сязей. Во всех остальных случаях используется тот вариант поведения, который уменьшает разницу между минимальной и максимальной силами среди действующих на связи

либо `ratio`, либо `optimized_cap` должны быть не 0. Рекомендуемое значение `ratio`>5, `optimized_cap`>0.00002, чем меньше - тем точнее найдётся ПС, но при этом тем дольше времени необходимо на его нахождение. Если и `ratio`, и `optimized_cap` не 0, то требуется выполнение обеих условий. 

Вообще, сходимость алгоритма на структурах с более, чем 2 связями не доказана, но итоговая геометрия выглядит намного ближе к ПС, чем начальная. 

# test_opt.py
проверка алгоритма по тестам
